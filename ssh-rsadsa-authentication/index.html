<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Jeyg">
<meta name="description" content="Password authentication is good but can be dangerous, because it is weak against brute force attacks. There are some mechanisms which allow to mitigate this treat. There are also safer authentication mechanisms for SSH, like public key auhtentication.
We&amp;rsquo;re going to create a key pair from our client, a public and a private. We send the public key to the server. Thus, when the client tries to connect, the server communicates by encrypting communications with the public key." />
<meta name="keywords" content=", GNU/Linux, OpenSSH, Security, SSH" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="http://blog.mathevet.xyz/ssh-rsadsa-authentication/" />


    <title>
        
            SSH: RSA/DSA authentication :: Jeremy Mathevet&#39;s blog  â€” Cloud &amp; Software with love
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.min.b68186a5842a9505e4f29180b86081b391cd3fcb5f11f101faf63956a3b7ec4e.css">







<meta itemprop="name" content="SSH: RSA/DSA authentication">
<meta itemprop="description" content="Password authentication is good but can be dangerous, because it is weak against brute force attacks. There are some mechanisms which allow to mitigate this treat. There are also safer authentication mechanisms for SSH, like public key auhtentication.
We&rsquo;re going to create a key pair from our client, a public and a private. We send the public key to the server. Thus, when the client tries to connect, the server communicates by encrypting communications with the public key.">


<meta itemprop="datePublished" content="2014-02-07T12:53:24&#43;00:00" />
<meta itemprop="dateModified" content="2014-02-07T12:53:24&#43;00:00" />
<meta itemprop="wordCount" content="454">



<meta itemprop="keywords" content="GNU/Linux,OpenSSH,Security,SSH," />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SSH: RSA/DSA authentication"/>
<meta name="twitter:description" content="Password authentication is good but can be dangerous, because it is weak against brute force attacks. There are some mechanisms which allow to mitigate this treat. There are also safer authentication mechanisms for SSH, like public key auhtentication.
We&rsquo;re going to create a key pair from our client, a public and a private. We send the public key to the server. Thus, when the client tries to connect, the server communicates by encrypting communications with the public key."/>





    <meta property="article:section" content="System" />



    <meta property="article:published_time" content="2014-02-07 12:53:24 &#43;0000 &#43;0000" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">cd ~/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="http://blog.mathevet.xyz/posts">Posts</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="http://blog.mathevet.xyz/ssh-rsadsa-authentication/">SSH: RSA/DSA authentication</a></h2>

            

            <div class="post-content">
                <p>Password authentication is good but can be dangerous, because it is weak against brute force attacks. There are some mechanisms which allow to mitigate this treat. There are also safer authentication mechanisms for SSH, like public key auhtentication.</p>

<p>We&rsquo;re going to create a key pair from our client, a public and a private. We send the public key to the server. Thus, when the client tries to connect, the server communicates by encrypting communications with the public key. Only the client owning the private key will be able to understand messages from the server and initiate the connection.</p>

<blockquote>
<p><strong>Note:</strong> Asymmetric encryption is only used for authentication. Once the conenction is established, the server generates a secret key which is sent to the client. This transmission is encrypted with the public key. The secret key is then used to encrypt all communications for the session, in order to save resources. Indeed, asymmetric encryption consumes a lot more resources than symmetric encryption.</p>
</blockquote>

<p>Before anything else, we verify the SSH server configuration:</p>

<blockquote>
<p>/etc/ssh/sshd_config</p>
</blockquote>

<pre><code>RSAAuthentication yes
PubkeyAuthentication yes
</code></pre>

<p>Then we have the creation of the key pair on the client. The following comnands must be launched as the user you want to be on the server.</p>

<pre><code>$ ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/home/jean-pierre/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/jean-pierre/.ssh/id_rsa.
Your public key has been saved in /home/jean-pierre/.ssh/id_rsa.pub.
The key fingerprint is:
5d:c9:d4:c6:3a:8d:0b:10:33:32:9c:53:55:a1:d0:61 jean-pierre@velo
</code></pre>

<p>You can generate DSA keys using -t dsa.</p>

<p>I recommend to enter a passphrase: it is used to encrypt (symmetric encryption) the private key, which adds an additional security layer.</p>

<p>We now just need to send the public key, either on your own if you can, or contact the server administrator. If you have the hand on the server, there are two ways to do it:</p>

<ul>
<li>The <strong>ssh-copy-id</strong> command</li>
<li>Manual copy</li>
</ul>

<p>ssh-copy-id, which must be launched from the client, copies the public key specified as parameter (-i) into the <strong>~/.ssh/authorized_keys</strong> file on the server.</p>

<pre><code>$ ssh-copy-id -i id_rsa.pub [user@]host
</code></pre>

<p>After that, you should be able to connect via the public key. If you didn&rsquo;t type any passphrase during the keys generation, no password will be asked. Otherwise, the passprhrase of the private key will be needed. Typing this passphrase at each conenction can be unpleasant. Fortunately, here comes the SSH agent, which will keep the key in memory for you.</p>

<pre><code>$ ssh-agent
</code></pre>

<p>ssh-agent displays environment vairables you have to declare. So here you go. Then:</p>

<pre><code>$ ssh-add
Enter passphrase for /home/jean-pierre/.ssh/id_dsa:
Identity added: /home/jean-pierre/.ssh/id_dsa (/home/jean-pierre/.ssh/id_dsa)
</code></pre>

<p>Well done. To do after each reboot.</p>

<p>You can now disable password authentication and login using pubkey authentication.</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
  				<p>
  					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="http://blog.mathevet.xyz/tags/gnu/linux">GNU/Linux</a></span><span class="tag"><a href="http://blog.mathevet.xyz/tags/openssh">OpenSSH</a></span><span class="tag"><a href="http://blog.mathevet.xyz/tags/security">Security</a></span><span class="tag"><a href="http://blog.mathevet.xyz/tags/ssh">SSH</a></span>
  				</p>
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
                <span><a href="http://blog.mathevet.xyz">Jeremy Mathevet</a></span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span> <a href="http://blog.mathevet.xyz/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="/bundle.min.d889f909e0536e07868fcaacee7d4b3f9ff14ad7ab1b29cf4c9eefd395beb291dcd983e13b8663ffa20f90fe98e41467de128a97ad45cf86738ec9a46df5ec1b.js" integrity="sha512-2In5CeBTbgeGj8qs7n1LP5/xSterGynPTJ7v05W&#43;spHc2YPhO4Zj/6IPkP6Y5BRn3hKKl61Fz4ZzjsmkbfXsGw=="></script>



    </body>
</html>
